# TP3 - Taigne-que Bateule ğŸš‘

â° Date de remise : **9 dÃ©cembre Ã  23h59**. (Remise sur Teams)

ğŸ“¦ Projet de dÃ©part : TÃ©lÃ©chargement

## ğŸ“œ ModalitÃ©s du TP

* ğŸ‘¤ Le TP doit Ãªtre fait de maniÃ¨re individuelle.
* âœ… Le projet de dÃ©part fourni devra Ãªtre complÃ©tÃ© et remis en entier. (CompressÃ©)
* â›” Attention au **plagiat**. Pour rappel, il est interdit de :
  * Copier en partie ou complÃ¨tement le code d'une autre personne.
  * Copier du code gÃ©nÃ©rÃ© par IA.
* ğŸ“… La pÃ©nalitÃ© de retard est de **-10%** par **tranche de 24h entamÃ©e**.
  * Si le retard dÃ©passe **120h** (5 jours), la note sera de **0**.
* ğŸš« Il est interdit de modifier le code **HTML** ou **CSS** du projet de dÃ©part.
* ğŸš« Il est interdit d'utiliser des notions qui n'ont pas Ã©tÃ© abordÃ©es en classe, Ã  moins de demander Ã  votre enseignant(e) **pendant un cours**.
  * Sinon, 0% pour chaque TODO concernÃ©, Ã  la discrÃ©tion de l'enseignant(e).

:::danger

Si votre travail est suspectÃ© de plagiat (code copiÃ© d'un(e) autre Ã©tudiant(e), code gÃ©nÃ©rÃ© par IA, notions non abordÃ©es en classe, etc.), deux choses peuvent se produire :

* Le plagiat est prouvÃ© par nos outils : **Note de 0**, automatiquement.
* Le plagiat est plutÃ´t Ã©vident, mais une validation est requise : vous serez convoquÃ©(e) au bureau de votre enseignant(e). Vous devrez rÃ©pondre Ã  certaines questions pour prouver que vous comprenez et maÃ®trisez le code qui a Ã©tÃ© utilisÃ© dans votre TP. Si vous ne rÃ©ussissez pas Ã  rÃ©pondre Ã  certaines questions, vous aurez la **note de 0**. (Si vous ne comprenez pas votre propre code, c'est que vous avez plagiÃ©, d'une maniÃ¨re ou d'une autre)

:::

## âœ¨ Description du jeu

En solo oÃ¹ avec l'aide d'un(e) ami(e), vous devrez affronter des vagues d'ennemis avec votre petit tank. Il y a un total de 30 niveaux.

<center>![AperÃ§u du jeu](../../static/img/tp3/tankBattle.png)</center>

Ã€ chaque fois que vous complÃ©tÃ© un niveau qui est un multiple de 3 (3, 6, 9, etc.), vous pourrez dÃ©bloquer une amÃ©lioration :

<center>![AperÃ§u du jeu](../../static/img/tp3/upgrades.png)</center>

## ğŸšœ TODOs

ğŸ“ Vous devrez seulement travailler sur `script.js`. Il y a plusieurs autres fichiers JavaScript, mais vous n'aurez pas besoin de les consulter.

:::info

Les instructions pour chaque TODO sont uniquement dans l'Ã©noncÃ©. Il n'y pas d'indications supplÃ©mentaires dans le code. N'oubliez pas de **tester vos TODOs** Ã  l'aide des indications dans cet Ã©noncÃ©. 

:::

### TODO 0 - Ã‰tat initial ğŸ 

Au dÃ©but du TP, le jeu fonctionne dÃ©jÃ , Ã  quelques dÃ©tails prÃ¨s :

* Le bouton pour activer / dÃ©sactiver la musique (en bas Ã  droite) ne fonctionne pas. (TODO 1)
* Durant les niveaux, les ennemis restants ne sont pas affichÃ©s sous forme d'icÃ´nes en bas Ã  gauche. (TODO 2)

<center>![AperÃ§u du jeu](../../static/img/tp3/tankIcons.png)</center>

* Lorsqu'on survole une amÃ©lioration Ã  dÃ©verrouiller, il n'y a pas de tooltip avec une description. (TODO 3)
* Impossible d'utiliser le menu dÃ©roulant en haut Ã  gauche. (Qui permettra d'aller consulter les scores) (TODO 4)

### TODO 1 - Et musique fut ğŸµ

Cette section permettra d'activer et de dÃ©sactiver les sons du jeu Ã  l'aide d'un bouton en bas Ã  droite du jeu.

#### ğŸ“ Instructions

<center>![IcÃ´ne de musique](../../static/img/tp3/todo1.png)</center>

Il faut rendre l'icÃ´ne ğŸµ **cliquable**. Cliquer sur l'icÃ´ne devra ... :

* Mettre `gSonActifs` Ã  `true` ou Ã  `false`. (On alterne entre les deux Ã  chaque clic)
* Changer l'image de l'icÃ´ne pour indiquer si les sons sont actifs. (Utilisez `"images/music_on.png"` et `"images/music_off.png"`)

#### ğŸ§ª Tester

Assurez-vous que l'apparence de l'icÃ´ne soit cohÃ©rente avec la prÃ©sence ou l'absence des sons. (Quand l'icÃ´ne est biffÃ©e en rouge, les sons doivent Ãªtre inactifs)
Bien entendu pour entendre ğŸ‘‚ les sons vous aurez besoins d'Ã©couteurs filaires au CÃ©gep. (Ou bien il faudra tester chez soi !)

<center>
![IcÃ´ne de musique](../../static/img/tp3/todo1.png)
![IcÃ´ne de musique](../../static/img/tp3/todo1_2.png)
</center>

### TODO 2 - Appelle une ambulance, mais pas pour moi ğŸš‘

<center>![AperÃ§u du jeu](../../static/img/tp3/tankIcons.png)</center>

Ce TODO permettra d'afficher, en bas Ã  gauche du jeu, une icÃ´ne pour chaque ennemi encore vivant durant un niveau. Ã€ mesure que les ennemis seront Ã©liminÃ©s, des icÃ´nes seront retirÃ©s de l'affichage. (Ã‡a peut sembler peu utile, mais il y a des ennemis invisibles Ã  partir du niveau 20 et cela devient pertinent Ã  ce moment)

Il y aura trois fonctions Ã  complÃ©ter pour ce TODO.

#### ğŸ“ Instructions

**`retirerListeEnnemis()`** : **Retire** l'Ã©lÃ©ment avec la classe `.listeEnnemis` de la page, s'il existe.

<hr/>

**`afficherEnnemis()`** : Cette fonction permettra de crÃ©er et d'afficher la **liste d'icÃ´nes**.

ğŸ” Notez que la variable `gListeEnnemis` contient, en tout temps, un **tableau de couleurs** qui reprÃ©sentent les ennemis **qui sont encore vivants**. Ex : `["Bleu", "Rouge", "Orange", "Orange"]`

1. Commencez par appeler la fonction `retirerListeEnnemis()` pour retirer la liste. (Nous allons recrÃ©er la liste Ã  partir de zÃ©ro)
2. Puis, s'il reste au moins un ennemi en jeu, crÃ©er puis intÃ©grez le HTML suivant dans l'Ã©lÃ©ment avec la classe `.jeu` :

```html showLineNumbers
<div class="listeEnnemis">
  <img src="images/miniJaune.png" alt="Ennemi Jaune">
  <img src="images/miniJaune.png" alt="Ennemi Jaune">
  <img src="images/miniOrange.png" alt="Ennemi Orange">
  <img src="images/miniRouge.png" alt="Ennemi Rouge">
</div>
```

(Ceci est un exemple si le tableau `gListeEnnemis` contenait actuellement `["Jaune", "Jaune", "Orange", "Rouge"]`. Il faudra crÃ©er une Ã  plusieurs `<img>` cohÃ©rentes avec les couleurs du tableau !)

<hr/>

**`retirerEnnemiDeLaListe()`** : Cette fonction recevra une couleur en paramÃ¨tre. (Ex : `"Bleu"`, ou `"Rouge"`, ou etc.) Le but sera de retirer cette couleur du tableau `gListeEnnemis`, mais **une seule fois** ! Ensuite, juste aprÃ¨s, on appelera la fonction `afficherEnnemis()` pour mettre l'affichage Ã  jour.

Exemple : si le paramÃ¨tre contient `"Bleu"` et `gListeEnnemis` contenait `["Bleu", "Bleu", "Rouge"]`, alors `gListeEnnemis` va devenir `["Bleu", "Rouge"]`.

#### ğŸ§ª Tester

Atteignez le **niveau 2** (puisqu'il contient plusieurs ennemis), et assurez que les icÃ´nes des trois ennemis gris s'affichent bien. Assurez-vous Ã©galement qu'Ã  chaque fois que vous Ã©liminez un ennemi, une des trois icÃ´nes disparait.

### TODO 3 - IcÃ´nes incomprÃ©hensibles ğŸ˜µâ€ğŸ’«

#### ğŸ“ Instructions

#### ğŸ§ª Tester

### TODO 4 - Scores et skill issues ğŸ†

Cette fonction rendra fonctionnel un petit menu dÃ©roulant en haut Ã  gauche pour afficher l'historique des scores. De plus, vous construirez un tableau HTML et afficherez l'historique des scores manuellement.

#### ğŸ“ Instructions

**Partie 1 : Menu dÃ©roulant**

<center>
![Menu dÃ©roulant](../../static/img/tp3/todo2_1.png)
![Menu dÃ©roulant](../../static/img/tp3/todo2_2.png)
</center>

Notez que les boutons Â« Jouer Â» et Â« Scores Â» du menu **fonctionnent dÃ©jÃ **. Ils permettent d'afficher le jeu OU l'historique des scores. Cela dit, pour moment, cliquer sur Â« Menu Â» ne fait rien : c'est sur Ã§a que vous allez travailler !

Vous aurez **trois choses** Ã  faire pour rendre le menu dÃ©roulant fonctionnel :
1. CrÃ©er une fonction qui permet d'afficher et de cacher le menu dÃ©roulant. (`display` passe Ã  `"block"` ou `"none"`.)
2. CrÃ©er un Ã©couteur d'Ã©vÃ©nements qui affiche le menu lorsqu'on **clique** sur Â« Menu Â».
3. CrÃ©er un Ã©couteur d'Ã©vÃ©nements qui cache le menu lorsqu'on **arrÃªte de survoler** le menu. (Le type de l'Ã©vÃ©nement sera `"mouseleave"`, comme dans les notes de cours.)

:::danger

â›” Les deux Ã©couteurs d'Ã©vÃ©nements doivent **appeler la mÃªme fonction** en lui envoyant `"block"` ou `"none"` en **paramÃ¨tre**.

:::

<hr/>

**Partie 2 : Historique des scores**

<center>
![Historique des scores](../../static/img/tp3/todo2_3.png)
</center>

Sachant que le bouton Â« Scores Â» du menu dÃ©roulant permet dÃ©jÃ  d'accÃ©der Ã  l'historique des scores, il ne vous restera qu'Ã  complÃ©ter la fonction `afficherScores()`, dont le but est de **meubler le tableau avec les scores**. Notez que `afficherScores()` est dÃ©jÃ  appelÃ©e lorsqu'on appuie sur Â« Scores Â» dans le menu.

De base, dans la page, le tableau des scores ressemble Ã  ceci :

```html showLineNumbers
<table class="scores">
    <tr>
        <th>Nom</th>
        <th>Niveaux rÃ©ussis</th>
        <th>Vies perdues</th>
        <th>Chrono total</th>
    </tr>
</table>
```

Dans la fonction `afficherScores()`, Ã  l'aide, entre autres, de `createElement()`, nous voudrons avoir un rÃ©sultat similaire Ã  celui-ci : 

```html showLineNumbers
<table class="scores">
  <tr>
      <th>Nom</th>
      <th>Niveaux rÃ©ussis</th>
      <th>Vies perdues</th>
      <th>Chrono total</th>
  </tr>
  <tr class="rangeeScore">
    <td>Yolande</td>
    <td>3</td>
    <td>2</td>
    <td>00:00:26.825</td>
  </tr>
  <tr class="rangeeScore">
    <td>Ali</td>
    <td>2</td>
    <td>2</td>
    <td>00:00:26.700</td>
  </tr>
</table>
```

On remarque donc qu'un Ã©lÃ©ment `<tr>` a Ã©tÃ© ajoutÃ© pour **chacun des scores**. De plus, chaque `<tr>` contient quatre `<td>` :

* Le premier contient le **pseudo**.
* Le deuxiÃ¨me contient le **nombre de niveaux rÃ©ussis**.
* Le troisiÃ¨me contient le **nombre total de vies perdues**.
* Le quatriÃ¨me contient le **chrono**. (Il faudra utiliser la fonction `chaineChronoMS()`, qui existe dÃ©jÃ , pour bien afficher le chrono.)

ğŸ” Notez qu'il n'y a pas de **style** ou d'**attribut** quelconque Ã  ajouter dans les Ã©lÃ©ments que vous allez crÃ©er. (Seulement la **classe** `rangeeScore`)

:::tip

> Comment rÃ©cupÃ©rer les quatre donnÃ©es Ã  afficher dans les `<td>` ?

Parmi les variables globales, il y a les tableaux `gPseudos`, `gNiveaux`, `gViesPerdues` et `gChronos`. Ces quatre tableaux auront **toujours la mÃªme taille** (Ex : ils sont tous de taille 1, ou bien ils sont tous de taille 2, etc.) et contiendront toutes les donnÃ©es Ã  afficher dans le tableau. Par exemple, la premiÃ¨re rangÃ©e utilise `gPseudos[0]`, `gNiveaux[0]`, `gViesPerdues[0]` et `gChronos[0]`.

:::

**DerniÃ¨re chose** : au dÃ©but de la fonction, il faudra **supprimer de la page** tous les Ã©lÃ©ments avec la classe `rangeeScore`. Cela permettra d'Ã©viter d'afficher les scores en double lorsqu'on alterne entre le jeu et les scores.

#### ğŸ§ª Tester

Commencez par vÃ©rifier que le menu dÃ©roulant fonctionne comme prÃ©vu et permet de naviguer entre le jeu et les scores.

Ensuite, il suffit de jouer au moins deux parties (vous pouvez perdre rapidement) pour vÃ©rifier que les scores s'affichent bien.

<center>![Historique des scores](../../static/img/tp3/todo2_3.png)</center>

Assurez-vous qu'en alternant entre le jeu et les scores Ã  l'aide du menu dÃ©roulant, les scores affichÃ©s ne se dupliquent pas.

## âœ… Grille de correction

